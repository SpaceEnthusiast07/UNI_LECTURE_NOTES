[Slides](https://ele.exeter.ac.uk/pluginfile.php/5398006/mod_resource/content/1/Week%207a%20-%20API.pdf)


##### Contents
 - [[#What is an API?]]
 - [[#Why are APIs useful?]]
 - [[#Web APIs]]
 - [[#Data Formats - XML vs JSON]]
 - [[#Parsing Data]]
 - [[#RESTful APIs]]
 - [[#Making API calls in Python]]
 - [[#Example - OpenWeatherMap API]]
 - [[#Handling API Keys Securely]]
 - [[#REST vs SOAP]]


##### What is an API?
 - An ***API*** is a set of *rules* and *protocols* that let one application provide services or data to another
 - Analogy: Restaurant Waiter
	 - You (the client) ask for something (a request)
	 - The waiter (API) takes it to the kitchen (the server)
	 - Then return what you ordered (a response)
 - You don't see how the kitchen *works*, the *API hides the complexity*


##### Why are APIs useful?
 - APIs help to:
	 - *Access data* (such as weather, news or stock prices)
	 - *Hide complexity* (no need to know the internal workings)
	 - *Improve security* (you don't directly access the database)
	 - *Extend functionality* (combine features from other apps)
 - APIs are everywhere:
	 - Operating systems (Windows API)
	 - Web browsers (DOM API)
	 - Web servers (Web APIs over HTTP)


##### Web APIs
 - APIs on the web use a *Request-Response* Model
 - Request - sent by the client (includes method, headers and body)
 - Response - sent by the server (includes status code + data)
 - Example:
```
GET https://api.weather.com/data?city=Exeter
â†’ Response: { "temperature": 18, "humidity": 80 }
```
 - Example status codes:
	 - `200` = OK
	 - `404` = Not Found
	 - `500` = Server Error


##### Data Formats - XML vs JSON
 - XML - Older format
	 - Tag-based and structured
	 - Used in older *SOAP* APIs
	 - Verbose and slower to process
	 - Example:
```xml
<note>
  <to>Tove</to>
  <from>Jani</from>
  <heading>Reminder</heading>
  <body>Don't forget me this weekend!</body>
</note>
```
 - JSON - Modern format
	 - JavaScript Object Notation
	 - Lightweight, fast and human readable
	 - Standard for *REST* APIs
	 - Works naturally with Python dictionaries and JS objects


##### Parsing Data
 - Parsing = converting raw text into structured data your program can use
 - Example:
```python
# Importing the json module
import json

# Creating a simple json string
data = '{"temperature": 18, "humidity": 80}'

# Use the json module to parse the data
parsedData = json.loads(data)

# Output the value associated with "temperature"
print(parsedData["temperature"])

--OUTPUT-------------------------------------------------------------
18
```


##### RESTful APIs
 - ***REST*** (*Representational State Transfer*) is a way of designing APIs using:
	 - *URLs* (endpoints) for resources
	 - HTTP methods:
		 - `GET` -> Read data
		 - `POST` -> Create data
		 - `PUT` -> Update data
		 - `DELETE` -> Remove data
	 - Data is usually sent in JSON format
 - Example:
```url
https://newsapi.org/v2/top-headlines?sources=bbc-news&apiKey=<your-key>
```

>[!warning] Never share your API key publicly


##### Making API calls in Python
 - Use the `requests` library
 - Example:
```python
# Import the requests library
import requests

# Supply a url and headers
url = "https://api.weatherapi.com/v1/current.json?q=Exeter"
headers = {"Authorisation":"Bearer <API_KEY>"}

# Send the request using the API
response = requests.get(url, headers=headers)

# Output the response
print(response.json())
```


##### Example - OpenWeatherMap API
```python
import requests, json

# 
base_url = "http://api.openweathermap.org/data/2.5/weather?"
api_key = "<your_api_key>"
city_name = input("Enter city name: ")

complete_url = base_url + "appid=" + api_key + "&q=" + city_name
response = requests.get(complete_url)
data = response.json()

if data["cod"] != "404":
    main = data["main"]
    print("Temperature (in kelvin unit):", main["temp"])
    print("Atmospheric pressure (in hPa:", main["pressure"])
    print("Humidity:", main["humidity"])


--OUTPUT-------------------------------------------------------------
# Temperature (in kelvin unit): 281.08
# Atmospheric pressure (in hPa): 982
# Humidity: 87%
```


##### Handling API Keys Securely
 - Never hard-code API keys inside a program
 - Store them in a local file like `api-key.json`
 - Example:
```json
{
	"API-keys": {
		"weather": "7e07fba5693c47c2a150739c4d58d177"
	}
}
```
 - Load this in Python
```python
with open('api-key.json') as f:
	keys = json.load(f)

print(keys["API-keys"]["weather"])
```


##### REST vs SOAP
![[Pasted image 20251104112204.png]]









