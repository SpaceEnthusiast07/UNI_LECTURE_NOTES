[Slides](https://ele.exeter.ac.uk/pluginfile.php/5566115/mod_resource/content/2/ECM1413_25_26_Lecture_06_Memory_Management.pdf)


##### Contents
 - [[#Recap Process Control Block]]
 - [[#The Three Main Tasks]]
 - [[#Basic Techniques Partitions]]
 - [[#Advanced Techniques Segmentation and Paging]]
 - [[#Virtual Memory]]
 - [[#Summary of Keywords]]


##### Recap: Process Control Block
 - Each process has a ***Process Control Block*** which is *stored in main memory* and contains *information about each process*.
 - *Process ID (PID)*: A unique identifier for each process which is given by the OS.
 - *Process State*: Indicates which state the process is in, i.e. New, Ready, Running, Waiting, or Terminated.
 - *Process Address Space*: A pointer to where the program's data is, this is a block of memory containing the process' text, data, stack and heap.
 - *Process I/O*: Information and data about what I/O devices this process is currently interacting with.


##### The Three Main Tasks
The OS has three main jobs when it comes to memory management:
 - **Allocation**: Finding a block of memory to allocate to a given process.
 - **Protection**: Ensuring that process A cannot read nor write to the memory of process B.
 - **Sharing**: Sometimes, two processes need to read and write to the same memory block, so the OS must allow this safely.


##### Basic Techniques: Partitions
The simplest way to manage memory is to *divide* the RAM into *partitions* (sections).
**Fixed Partitioning**
 - Main memory is *divided into sections*.
 - Each section can be a *different size*, e.g. 16MB or 32MB.
 - However, each section *cannot change size once allocated*/set.
 - We run into **Internal Fragmentation**. If you have a 10MB section, and the process only requires 2MB, then you have 8MB of *wasted space*, i.e. internal fragmentation.
**Dynamic Partitioning**
 - You give each process that *exact amount of memory it requires*.
 - As processes start and finish, you end up with tiny gaps of empty (*wasted*) space in between processes, i.e. we have run into **external fragmentation**.
 - **Compaction** is the fix, where the OS occasionally *move process* memory blocks around so they occupy a *contiguous block* of memory, resulting in all the tiny gaps of *wasted memory* becoming one *big block of free memory*.
 - However, this process takes a lot of time and CPU power, so adds a *huge overhead*.


##### Advanced Techniques: Segmentation and Paging
Modern computers use more "chopped up" methods to avoid the problems above.
**Simple Segmentation**
 - Instead of the process's *text, data, stack and heap* being stored in contiguous memory, *they are split up into logical segments* and stored *non-contiguously* in memory.
 - This way, it is is *easier to protect* and *share* specific parts of a program.
 - The OS uses a *map*, called a **Segment Table**, which keeps track of *where each segment of a program is* stored in memory.
**Simple Paging**
 - This method is *most common*.
 - You divide RAM up into many *tiny, equally sized* sections called **Frames** (e.g. 4KB).
 - You then split up a process into *equal sized* pieces called **Pages**.
 - The benefit is that the process' *pages* can be *scattered anywhere in memory*. This *eliminates external fragmentation*.
 - The OS uses a **Page Table** to keep track of *which page of a process* is located in *which frame of the RAM*.


##### Virtual Memory
 - **Virtual memory** refers to the *use of secondary storage* as if it were *main memory*.
 - Virtual memory allows you to run a program even if it is bigger than the available amount of RAM.
 - The OS doesn't load the entire program into memory. It only loads the pages or segments when the CPU actually needs them.
 - *Pros*: You can run *many more programs* at once and they *can be huge*.
 - *Cons*: It requires *more work* (overhead) from the OS to keep swapping pages in and out.


##### Summary of Keywords
 - **Internal Fragmentation** - *Wasted space inside* an allocated block (common in *fixed partitions*).
 - **External Fragmentation** - *Wasted space between* allocated blocks (common in *dynamic partitions*).
 - **Compaction** - *Shuffling memory* around to *get rid of external wasted space*.
 - **Page** - A small, fixed size *chunk of a process*.
 - **Frame** - A small, fixed size *chunk of physical RAM*.
 - **Virtual Memory** - A trick where the OS *uses secondary storage* to *pretend it has more RAM* than it actually does.














